<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XTA Converter</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script src="https://apis.google.com/js/api.js" async defer></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <img src="XTA Logo (Transparent)_300x150.png" alt="XTA Logo">
    
    <div id="googleSignInButton"></div>

    <div id="main-content">
        <div class="circle">
            <div class="instructions-icon-1">?</div>
            <span class="instructions-label">How To Get Started</span>
        </div>
        <div class="overlay-1">
            <div class="instructions-1">
                <h3>Creating the XML</h3>
                <ol>
                    <li>In Premiere Pro, within your Project Panel, deselect all items.</li>
                    <li>Go to File > Export > Final Cut Pro XML.</li>
                    <li>Put the XML into your project folder's 4_Project Files subfolder.</li>
                    <li>Drag/drop or click to upload your XML on this page.</li>
                </ol>
            </div>
        </div>
        <div class="file-upload">
            <input type="file" id="xmlFileUpload" accept=".xml">
            <label for="xmlFileUpload" id="uploadLabel">Add XML File</label>
        </div>
        <br>
        <div class="checkbox-input">
            <input type="checkbox" id="showMediaFilesCheckbox" class="media-checkbox">
            <label for="showMediaFilesCheckbox" class="media-custom-checkbox"></label>
            <span class="heading-2">Show Media Files</span>
        </div>
        <br>
        <div id="xmlHierarchy" class="xml-container"></div>
        <br>
        <form>
            <div>
                <label for="channel-dropdown">Channel:</label>
                <select id="channel-dropdown" name="option" value="Select Channel">
                    <option value="Test Channel" selected>Test Channel</option>
                    <option value="Select Channel" selected>Select Channel</option>
                    <option value="AFV Kids">AFV Kids</option>
                    <option value="AFV TV">AFV TV</option>
                    <option value="Alpine TV">Alpine TV</option>
                    <option value="Angry Birds">Angry Birds</option>
                    <option value="ATM Food">ATM Food</option>
                    <option value="ATM Drone">ATM Drone</option>
                    <option value="Beach Bum TV">Beach Bum TV</option>
                    <option value="Bob Ross">Bob Ross</option>
                    <option value="California TV">California TV</option>
                    <option value="Cheeky">Cheeky</option>
                    <option value="Chive TV">Chive TV</option>
                    <option value="Crafty">Crafty</option>
                    <option value="Deep Dive">Deep Dive</option>
                    <option value="Drive TV">Drive TV</option>
                    <option value="Easter TV">Easter TV</option>
                    <option value="Escape TV">Escape TV</option>
                    <option value="Fireplace TV">Fireplace TV</option>
                    <option value="Form TV">Form TV</option>
                    <option value="Guinness World Records">Guinness World Records</option>
                    <option value="Halloween TV">Halloween TV</option>
                    <option value="Happy TV">Happy TV</option>
                    <option value="Holiday TV">Holiday TV</option>
                    <option value="Oddly Satisfying">Oddly Satisfying</option>
                    <option value="Paws TV">Paws TV</option>
                    <option value="Red Bull TV">Red Bull TV</option>
                    <option value="St. Patrick's TV">St. Patrick's TV</option>
                    <option value="Superhuman">Superhuman</option>
                    <option value="Super Toons TV">Super Toons TV</option>
                    <option value="Tattoo">Tattoo</option>
                    <option value="Throttle">Throttle</option>
                    <option value="Untamed">Untamed</option>
                    <option value="Valentine's TV">Valentine's TV</option>
                    <option value="WPT">WPT</option>
                    <option value="X Games">X Games</option>
                    <option value="ZONE">ZONE</option>
                </select>
            </div>
            <div>
                <label for="date">Date Posting:</label>
                <input type="date" id="date" name="date">
            </div>

            <span class="bottom-buttons">
                <button type="button" id="copy-cells-btn">Copy Cells</button>
                <button type="button" id="download-csv-btn">Download CSV</button>
                <button type="button" id="upload-airtable-btn" class="inactive-btn" disabled>Upload to Airtable</button>
            </span>
            <div id="message-text"></div>
            <div class="circle">
                <div class="instructions-icon-2">?</div>
                <span class="instructions-label">How To Use The CSV</span>
            </div>
            <div class="overlay-2">
                <div class="instructions-2">
                    <h3>Option 1: Copy/Paste CSV Data</h3>
                    <ol>
                        <li>In VOD Content Tracking, go to your channel's tab.</li>
                        <li>Use CMD+Shift+V to paste your copied tracking data.</li>
                        <li>Fix "Add Manually" fields and remove rows as needed.</li>
                    </ol>
                    <h3>Option 2: Importing a CSV</h3>
                    <ol>
                        <li>In your channel dashboard, create a blank sheet/tab.</li>
                        <li>Go to File > Import and select your CSV.</li>
                        <li>In the popup dialog, select Replace current sheet.</li>
                        <li>Fix "Add Manually" fields and remove rows as needed.</li>
                        <li>Copy the corrected tracking. Use CMD+Shift+V to paste into VOD Content Tracking.</li>
                    </ol>
                </div>
            </div>
        </form>
    </div>
    <script type="module" src="script.js"></script>
    <script>
        var today = new Date();
        var dayOfWeek = today.getDay(); // 0 (Sunday) - 6 (Saturday)
        var daysUntilNextMonday;
    
        // If today is not Monday
        if(dayOfWeek !== 1) {
            daysUntilNextMonday = (8 - dayOfWeek) % 7; // calculate days until next Monday
            today.setDate(today.getDate() + daysUntilNextMonday);
        }
    
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
    
        var nextMonday = yyyy + '-' + mm + '-' + dd;
        document.getElementById("date").value = nextMonday;
    </script>
    <footer>
        <p>V2.0 Â© Dale Campo</p>
    </footer> 
</body>
</html>